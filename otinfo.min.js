// https://github.com/MattMatic/otinfo
!function(e,r){"function"==typeof define&&define.amd?define(r):"object"==typeof module?module.exports=r():e.OTInfo=r()}(this,(function(){var e={parse:function(r){var n=e._bin,a=new Uint8Array(r);if("ttcf"==n.readASCII(a,0,4)){var t=8,i=n.readUint32(a,t);t+=4;for(var d=[],s=0;s<i;s++){var o=n.readUint32(a,t);t+=4,d.push(e._readFont(a,o))}return d}return[e._readFont(a,0)]},_readFont:function(r,n){var a=e._bin,t={};n+=4;var i=a.readUint16(r,n);n+=8;for(var d=0;d<i;d++){var s=a.readASCII(r,n,4);n+=8;var o=a.readUint32(r,n);n+=4;var u=a.readUint32(r,n);n+=4,s=s.replace("/","_"),e[s]&&e[s].parse&&(t[s]=e[s].parse(r,o,u,t))}return t}};return e._bin={readUint16:function(e,r){return e[r]<<8|e[r+1]},readInt16:function(r,n){var a=e._bin.readUint16(r,n);return a>=32768&&(a-=65536),a},readUint32:function(r,n){var a=e._bin.t.uint8;return a[3]=r[n],a[2]=r[n+1],a[1]=r[n+2],a[0]=r[n+3],e._bin.t.uint32[0]},readTag:function(r,n){return e._bin.readASCII(r,n,4)},readUint64:function(r,n){return 4294967296*e._bin.readUint32(r,n)+e._bin.readUint32(r,n+4)},readASCII:function(e,r,n){for(var a="",t=0;t<n;t++)a+=String.fromCharCode(e[r+t]);return a},readUnicode:function(e,r,n){for(var a="",t=0;t<n;t++){var i=e[r++]<<8|e[r++];a+=String.fromCharCode(i)}return a}},e._bin.t={buff:new ArrayBuffer(8)},e._bin.t.int8=new Int8Array(e._bin.t.buff),e._bin.t.uint8=new Uint8Array(e._bin.t.buff),e._bin.t.int16=new Int16Array(e._bin.t.buff),e._bin.t.uint16=new Uint16Array(e._bin.t.buff),e._bin.t.int32=new Int32Array(e._bin.t.buff),e._bin.t.uint32=new Uint32Array(e._bin.t.buff),e.name={},e.name.parse=function(r,n){var a=e._bin,t={};n+=2;var i=a.readUint16(r,n);n+=2;for(var d,s=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette","preferredFamily","preferredSubfamily"],o=n+=2,u=0;u<i;u++){var f=a.readUint16(r,n);n+=2;var p=a.readUint16(r,n);n+=2;var U=a.readUint16(r,n);n+=2;var c=a.readUint16(r,n);n+=2;var l=a.readUint16(r,n);n+=2;var b=a.readUint16(r,n);n+=2;var m=s[c];m||(m="#"+c);var v,I=o+12*i+b;if(0==f)v=a.readUnicode(r,I,l/2);else if(3==f&&0==p)v=a.readUnicode(r,I,l/2);else if(0==p)v=a.readASCII(r,I,l);else if(1==p)v=a.readUnicode(r,I,l/2);else if(3==p)v=a.readUnicode(r,I,l/2);else{if(1!=f)throw new Error("unknown encoding "+p+", platformID: "+f);v=a.readASCII(r,I,l),console.log("reading unknown MAC encoding "+p+" as ASCII")}var y="p"+f+","+U.toString(16);null==t[y]&&(t[y]={}),t[y][m]=v,t[y]._lang=U}for(var S in t)if(null!=t[S].postScriptName)return t[S];for(var S in t){d=S;break}return console.log("returning name table with languageID "+t[d]._lang),t[d]},e.GSUB={},e.GPOS={},e.GSUB.parse=function(r,n,a,t){return e._gt.parse(r,n,a,t)},e.GPOS.parse=function(r,n,a,t){return e._gt.parse(r,n,a,t)},e._gt={},e._gt.parse=function(r,n,a,t){var i=n,d=e._bin;d.readUint16(r,n);n+=2;d.readUint16(r,n);n+=2;var s=d.readUint16(r,n);n+=2;var o=d.readUint16(r,n),u={};return u.scriptTable=e.scriptListTable.parse(r,i+s,a,t),u.featureListTable=e.featureListTable.parse(r,i+o,a,t),u},e.scriptListTable={},e.scriptListTable.parse=function(r,n,a,t){var i=n,d=e._bin,s=d.readUint16(r,n);s=Math.min(s,256),n+=2;for(var o={};s>0;){var u=d.readTag(r,n);n+=4;var f=d.readUint16(r,n);n+=2,o[u]=e.scriptTable.parse(r,i+f,a,t),s--}return o},e.scriptTable={},e.scriptTable.parse=function(r,n,a,t){var i=e._bin;i.readUint16(r,n);n+=2;var d=i.readUint16(r,n);d=Math.min(d,256),n+=2;for(var s=new Set;d>0;){var o=i.readTag(r,n);n+=4;i.readUint16(r,n);n+=2,s.add(o),d--}return s},e.featureListTable={},e.featureListTable.parse=function(r,n,a,t){var i=e._bin,d=i.readUint16(r,n);n+=2;for(var s=new Set;d>0;){var o=i.readTag(r,n);n+=4;i.readUint16(r,n);n+=2,d--,s.add(o)}return s},e.meta={},e.meta.parse=function(r,n,a,t){var i=e._bin,d=n;i.readUint32(r,n);n+=4;i.readUint32(r,n);n+=4;i.readUint32(r,n);n+=4;var s=i.readUint32(r,n);n+=4;for(var o={};s>0;){var u=i.readTag(r,n);n+=4;var f=i.readUint32(r,n);n+=4;var p=i.readUint32(r,n);n+=4,o[u]=i.readASCII(r,f+d,p),s--}return o},e.head={},e.head.parse=function(r,n,a,t){var i=e._bin,d={};return d.tableVersion=i.readUint16(r,n)+i.readUint16(r,n+2)/4096/10,n+=4,d.fontRevision=i.readInt16(r,n)+i.readUint16(r,n+2)/65535,d.fontRevision=Math.round(1e3*d.fontRevision)/1e3,n+=4,n+=8,d.flags=i.readUint16(r,n),n+=2,d.unitsPerEm=i.readUint16(r,n),n+=2,d.created=i.readUint64(r,n),n+=8,d.modified=i.readUint64(r,n),n+=8,d.xMin=i.readInt16(r,n),n+=2,d.yMin=i.readInt16(r,n),n+=2,d.xMax=i.readInt16(r,n),n+=2,d.yMax=i.readInt16(r,n),n+=2,d},e.OS_2={},e.OS_2.parse=function(r,n,a,t){var i=e._bin,d={};switch(d.version=i.readUint16(r,n),n+=2,d.xAvgCharWidth=i.readInt16(r,n),n+=2,d.usWeightClass=i.readUint16(r,n),n+=2,d.usWidthClass=i.readUint16(r,n),n+=2,d.fsType=i.readUint16(r,n),n+=2,d.fsTypeText="",15&d.fsType){case 0:d.fsTypeText+="Installable-embedding ";break;case 2:d.fsTypeText+="Restricted ";break;case 4:d.fsTypeText+="Preview/print ";break;case 8:d.fsTypeText+="Editable-embedding "}return 256&d.fsType&&(d.fsTypeText+="no-subset "),512&d.fsType&&(d.fsTypeText+="bitmap-embed "),d.ySubscriptXSize=i.readInt16(r,n),n+=2,d.ySubscriptYSize=i.readInt16(r,n),n+=2,d.ySubscriptXOffset=i.readInt16(r,n),n+=2,d.ySubscriptYOffset=i.readInt16(r,n),n+=2,d.ySuperscriptXSize=i.readInt16(r,n),n+=2,d.ySuperscriptYSize=i.readInt16(r,n),n+=2,d.ySuperscriptXOffset=i.readInt16(r,n),n+=2,d.ySuperscriptYOffset=i.readInt16(r,n),n+=2,d.yStrikeoutSize=i.readInt16(r,n),n+=2,d.yStrikeoutPosition=i.readInt16(r,n),n+=2,d.sFamilyClass=i.readInt16(r,n),n+=2,n+=10,n+=16,d.achVendorID=i.readTag(r,n),n+=4,d.fsSelection=i.readUint16(r,n),n+=2,d.usFirstCharIndex=i.readUint16(r,n),n+=2,d.usLastCharIndex=i.readUint16(r,n),n+=2,d.sTypoAscender=i.readInt16(r,n),n+=2,d.sTypoDescender=i.readInt16(r,n),n+=2,d.sTypoLineGap=i.readInt16(r,n),n+=2,d.usWinAscent=i.readUint16(r,n),n+=2,d.usWinDescent=i.readUint16(r,n),n+=2,d.ulCodePageRange1=i.readUint32(r,n),n+=4,d.ulCodePageRange2=i.readUint32(r,n),n+=4,d.sxHeight=i.readInt16(r,n),n+=2,d.sCapHeight=i.readInt16(r,n),n+=2,d.usDefaultChar=i.readUint16(r,n),n+=2,d.usBreakChar=i.readUint16(r,n),n+=2,d.usLowerOpticalPointSize=i.readUint16(r,n),n+=2,d.usUpperOpticalPointSize=i.readUint16(r,n),n+=2,d},e.maxp={},e.maxp.parse=function(r,n,a,t){var i=e._bin,d={};return d.tableVersion=i.readUint16(r,n)+(i.readUint16(r,n+2)>>24)/10,n+=4,d.numGlyphs=i.readUint16(r,n),n+=2,d.maxPoints=i.readUint16(r,n),n+=2,d.maxContours=i.readUint16(r,n),n+=2,d.maxCompositePoints=i.readUint16(r,n),n+=2,d.maxCompositeContours=i.readUint16(r,n),n+=2,d.maxZones=i.readUint16(r,n),n+=2,d.maxTwilightPoints=i.readUint16(r,n),n+=2,d.maxStorage=i.readUint16(r,n),n+=2,d.maxFunctionDefs=i.readUint16(r,n),n+=2,d.maxInstructionDefs=i.readUint16(r,n),n+=2,d.maxStackElements=i.readUint16(r,n),n+=2,d.maxSizeOfInstructions=i.readUint16(r,n),n+=2,d.maxComponentElements=i.readUint16(r,n),n+=2,d.maxComponentDepth=i.readUint16(r,n),n+=2,d},e.hhea={},e.hhea.parse=function(r,n,a,t){var i=e._bin,d={};return d.tableVersion=i.readUint16(r,n)+i.readUint16(r,n+2)/4096/10,n+=4,d.ascender=i.readInt16(r,n),n+=2,d.descender=i.readInt16(r,n),n+=2,d.lineGap=i.readInt16(r,n),n+=2,d.advanceWidthMax=i.readUint16(r,n),n+=2,d.minLeftSideBearing=i.readInt16(r,n),n+=2,d.minRightSideBearing=i.readInt16(r,n),n+=2,d.xMaxExtent=i.readInt16(r,n),n+=2,d},e}));